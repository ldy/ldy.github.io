$(document).ready(function(){var e,a,n,s,c,i,t,o,r=$(".g-nav");$("#menu-toggle").on("click",function(t){r.slideToggle(200),$(document).on("click",function(){r.slideUp(200)}),t.stopPropagation()}),r.on("click",function(t){t.stopPropagation()}),695<$(window).width()&&(e=$(".g-header"),a=e.outerHeight(),n=$(".g-logo"),s=r.find("a"),c=$(".g-banner").attr("data-theme"),i=$(document).scrollTop(),$(document).scroll(function(){var t=$(this).scrollTop(),o="nav-"+c;a<t?(3*a<t&&e.addClass("headerUp"),e.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),n.css({background:"url(/assets/icons/logo_"+c+".svg) no-repeat center","background-size":"100% 100%"}),s.css("color","#666"),r.addClass(o)):(e.removeClass("headerUp"),e.css({"background-color":"transparent","box-shadow":"none"}),n.css({background:"url(/assets/icons/logo.svg) no-repeat center","background-size":"100% 100%"}),s.css("color","#fff"),r.removeClass(o)),t<i?e.addClass("headerDown"):e.removeClass("headerDown"),i=t})),$(".read-next-item section").each(function(){var t=$(this).height(),o=$(".read-next-item").height();$(this).css("margin-top",(o-t)/2+"px"),$(this).fadeIn()}),$(".read-next-item img").each(function(){var t,o,e,a,n,s;t=$(this),o=$(".read-next-item"),e=t.width(),a=o.width(),n=t.height(),s=o.height(),n<s?(t.css({width:"auto",height:"100%"}),e=t.width(),a=o.width(),t.css("margin-left","-"+(e-a)/2+"px")):t.css("margin-top",(s-n)/2+"px"),t.fadeIn()});for(var l=parseInt($("#total_pages").val()),d=parseInt($("#current_pages").val()),h=$("#base_url").val(),g="",p=d-3;p<d;p++)0<p&&1!==p?g+='<a href="'+h+"page"+p+'" class="page-link page-num">'+p+"</a>":1===p&&(g+='<a href="'+h+'" class="page-link page-num">'+p+"</a>");g+='<span class="page-link page-num active">'+d+"</span>";for(var u=d+1;u<=d+3;u++)u<=l&&(g+='<a href="'+h+"page"+u+'" class="page-link page-num">'+u+"</a>");function f(){var e,a,n,t=$("#search_input"),o=$(".search_result");t.focus(function(){$(".icon-search").css("color","#3199DB"),o.show()}),t.keyup((e=this.autoComplete,a=a||120,function(){var t=this,o=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(t,o)},a)})),$(document).click(function(t){"search_input"!==t.target.id&&"search_result"!==t.target.className&&"search_item"!==t.target.className&&($(".icon-search").css("color","#CAD3DC"),o.hide())})}function v(){$(".table-of-contents").toggleClass("active"),$("#tools .tool.toc .b1").toggleClass("active"),$("#tools .tool.toc .b2").toggleClass("active")}function m(){for(var t=$("article :header"),o=$(".table-of-contents a").parent(),e=$(window).scrollTop(),a=0;a<t.length;a++){var n,s=$(t[a]).offset().top-100;s<e&&($(o).removeClass("active"),$(o[a]).addClass("active"),s=$(".toc-body li.active").offset().top-$(".toc-header h2").offset().top,n=$(".toc-body li.active").offset().top-$(".toc-body li:first-child").offset().top,s<22&&$(".toc-body").scrollTop(n-350),350<s)&&$(".toc-body").scrollTop(n-72)}}$("#page-link-container").html(g),f.prototype.autoComplete=function(){var s=this.value.toLowerCase();s.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON("../../search.json").done(function(t){var o,e="";for(o in t){var a=t[o],n=a.title;""!==s&&0<=(n+a.tags).toLowerCase().indexOf(s)&&(e+='<a class="search_item" href="'+a.url+'">'+a.title+"</a>")}$(".search_result").html(e)})},new f,"true"===$("#nm-switch").val()&&(t=$("body"),0<=(o=(new Date).getHours())&&o<=6||23===o)&&t.addClass("night-mode"),$(".post-content").on("mouseup",function(t){var o,e=window.getSelection();30<=e.toString().length&&(o=e,o+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(t){(window.clipboardData||t.originalEvent.clipboardData).setData("text/plain",o),t.preventDefault()}))}),$("#tools .tool.toc").bind("click",function(){v()}),$(".table-of-contents").on("click",function(){v()}),0<$(".toc-body").length&&($($(".table-of-contents a").parent()[0]).addClass("active"),m(),$(window).bind("scroll",m)),$(".bttb").bind("click",function(){$("html,body").animate({scrollTop:0},function(){$("#bttb").removeClass("active")})}),$(document).scroll(function(){var t=$(this).scrollTop();400<t?$("#bttb").addClass("active"):$("#bttb").removeClass("active")})});