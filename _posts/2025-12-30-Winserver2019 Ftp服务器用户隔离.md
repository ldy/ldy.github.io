---
layout: post
title: Winserver2019 Ftp服务器用户隔离
subtitle: '一个FTP站点支持多个用户登录且每个用户只能访问指定的文件路径'
date: 2025-12-30
author: 丶德灬锅
tags: Ftp 用户隔离
---

# Winserver2019 Ftp服务器用户隔离

## 前言

> Ftp服务器可以实现不同电脑之间的文件共享，公司一般会有多个部门支行等，不同部门支行之间又不想要其他部门支行能看到自己部门支行的私密文件，通过设置Ftp用户隔离，可以实现登录不同用户进入不同的Ftp目录。

## 新增角色

将需要访问Ftp的用户加入该用户组，后续如果有其他的成员需要添加，则直接添加新用户并添加到Ftp所在角色组即可。

![image-20251230105916520](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230105916520.png)

## 新增用户

新增一个用户用于控制进入Ftp服务器的权限，修改为密码永不过期，用户不能更改密码，该用户无需加入到远程登录用户组。

![image-20250819162818593](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-08-15-Winserver2019%E5%AE%89%E8%A3%85Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8-image-20250819162818593.png)

## 创建Ftp目录

设置Ftp用户隔离，Ftp目录结构如下，其中Ftp_Root为Ftp站点根目录，必须在Ftp站点根目录下新建LocalUser文件夹，如果允许匿名访问，还需要创建LocalUser\Public子目录，即直接访问Ftp地址时默认访问Public目录下的资源。FTP目录中的文件夹名字需要和用户名相同，后续添加Ftp用户的同时也要为其增加对应的文件夹。

![image-20251230110425651](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230110425651.png)

## 添加站点

### 配置身份验证

同时勾选匿名和基本身份验证。

![image-20251230111151195](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230111151195.png)

### 配置授权规则

授权规则设置指定用户组，权限勾选读取和写入。

![image-20251230111232666](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230111232666.png)

同时，如果需要所有部门都能访问Public文件夹，则还需要单独给Public设置匿名读取权限。

![image-20251230111529162](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230111529162.png)

### 配置用户隔离

选择用户名目录即可。

![image-20251230143505296](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230143505296.png)

### 配置虚拟目录

当zx用户，需要指定额外一个路径时，可以配置虚拟目录实现，当登录zx用户时访问指定的路径。

![image-20251230151619800](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230151619800.png)

### 测试

匿名登录时，可以访问公共文件。

![image-20251230152018207](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230152018207.png)

指定用户登录时，访问对应有用户目录。

![image-20251230152054606](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230152054606.png)

## 常见问题

登录Ftp，上传文件夹时，可能会出现该报错，需要在Ftp站点管理高级设置中，修改【允许UTF8】选项为【False】。

![v2-76aa12fc8d2cd59b73293b0e4d1abf45_r](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/v2-76aa12fc8d2cd59b73293b0e4d1abf45_r.jpg)

![image-20251230152203130](https://cdn.jsdelivr.net/gh/ldy/ldy.github.io@master/screenshot/2025-12-30-Winserver2019%20Ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-image-20251230152203130.png)